<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Flask-SQLAlchemy-DateBase | Curry-jian</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1.MySQL-python中间件的介绍和安装     * 在mac上可以直接输入  ‘sudo pip install mysql-python’进行安装     * 在window下需要到’https:&#x2F;&#x2F;www.lfd.uci.edu&#x2F;~gohlke&#x2F;pythonlibs&#x2F;#mysql-python3&#39;      这个网址下载对应的python版本的中间件          对应的命">
<meta property="og:type" content="article">
<meta property="og:title" content="Flask-SQLAlchemy-DateBase">
<meta property="og:url" content="http://yoursite.com/2020/02/04/Flask-SQLAlchemy-DateBase/index.html">
<meta property="og:site_name" content="Curry-jian">
<meta property="og:description" content="1.MySQL-python中间件的介绍和安装     * 在mac上可以直接输入  ‘sudo pip install mysql-python’进行安装     * 在window下需要到’https:&#x2F;&#x2F;www.lfd.uci.edu&#x2F;~gohlke&#x2F;pythonlibs&#x2F;#mysql-python3&#39;      这个网址下载对应的python版本的中间件          对应的命">
<meta property="article:published_time" content="2020-02-04T07:21:13.000Z">
<meta property="article:modified_time" content="2020-02-08T12:02:08.428Z">
<meta property="article:author" content="li jian">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Curry-jian" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Curry-jian</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Flask-SQLAlchemy-DateBase" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/04/Flask-SQLAlchemy-DateBase/" class="article-date">
  <time datetime="2020-02-04T07:21:13.000Z" itemprop="datePublished">2020-02-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Flask-SQLAlchemy-DateBase
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.MySQL-python中间件的介绍和安装<br>     * 在mac上可以直接输入  ‘sudo pip install mysql-python’进行安装<br>     * 在window下需要到’<a href="https://www.lfd.uci.edu/~gohlke/pythonlibs/#mysql-python3&#39;" target="_blank" rel="noopener">https://www.lfd.uci.edu/~gohlke/pythonlibs/#mysql-python3&#39;</a><br>      这个网址下载对应的python版本的中间件<br>          对应的命令： pip install mysqlclient-1.4.6-cp38-cp38-win_amd64.whl<br>     * 注意：如果与python的版本不符合就会出现报错的现象</p>
<p>2.ORM与Flask-SQLALchemy的安装和介绍<br>    * ORM: Objct Relationship Mapping (模型关系映射)<br>    * flask-aqlalchemy是一套ORM框架<br>    * ORM的好处：可以不适用sql语句进行对数据的修改 ，可以直接使用类的语句就好.一个表<br>        就是一个类，一条数据就是一个对象<br>    * 安装Flask-SQLALchemy： pip install flask-sqlalchemy</p>
<pre><code>例子： class Ariticle(Moble):
        id = int()
        title = String()
        content = Text()
       #实例化
           article = Article(id = 1,title = &apos;aaa&apos;,content = &apos;bbb&apos;)
       #加入表格或者说类中
            add(article)
       #修改数据内容
             article.title = &apos;ccc&apos;
             update(article)
       #删除内容
             delete(article)</code></pre><p>3.SQLALchemy连接数据库<br>    SQLALchemy :SQLAlchemy采用简单的Python语言，为高效和高性能的数据库访问设计<br>                是访问和操作数据库的开源脚本<br>    * 在实际操作过程中遇到的问题：<br>        * 在Mysql workbeath 中修改连接密码：右键出现Edit connections 进行点击 进入后点击store in Vault 就可以进行修改<br>        * 如何进入Mysql 命令行的形式：找到Mysql sever 下的bin目录 再就如命令行输入<br>            ./mysql -u root -p<br>        * 创建一个新的数据库 命令     creat datebase  数据库名  charset  utf8<br>    使用flask_sqlalchemy中的SQLALchemy进行初始化：</p>
<pre><code>    #调用函数
    from flask_sqlalchemy import SQLAlchemy
    app = Flask(__name__)
    #初始化一个对象
    db = SQLAlchemy(app)

设置配置文件&apos;config.py&apos;文件中添加一下配置
#dialect+driver://username:password@host:post/database


    DIALECT = &apos;mysql&apos;
    DRIVER = &quot;mysqldb&quot;
    USERNAME = &apos;root&apos;
    PASSWORD = &apos;root&apos;
    HOST = &apos;127.0.0.1&apos;
    PORT = &apos;3306&apos;
    DATABASE = &apos;db_demo1&apos;
    SQLALCHEMY_DATABASE_URI = &quot;{}+{}://{}:{}@{}:{}/{}?charset=utf8&quot;.format(DIALECT,
                                                   DRIVER,USERNAME,
                                                   PASSWORD,HOST,PORT,
                                                   DATABASE)
    #去除警告信息
    SQLALCHEMY_TRACK_MODIFICATIONS = False</code></pre><p>   在app文件中，添加配置文件，并且进行测试</p>
<pre><code>from flask import Flask
   #调用函数
from flask_sqlalchemy import SQLAlchemy
#引入config文件
import config
app = Flask(__name__)
#重点（不明白）
app.config.from_object(config)
#初始化一个对象
db = SQLAlchemy(app)
#进行测试
db.create_all()</code></pre><p>4.SQLALchemy模型与表映射<br>    * 创建的这个表可以称作为一个类，这个类必须要继承自’db.Model’，然后映射到表中的时候<br>       必须写成’db.Column’的数据类型<br>    * 数据类型：<br>        * ‘db.Integer’代表的是整型（int）<br>        * ‘db.String’ 代表的是’varcher’,需要指定最长的长度<br>        * ‘db.Text’代表的是 ‘text’<br>    * 参数类型：<br>        * ‘primary_key’:代表的是将字段是否设置为主键<br>        * ‘autoincrement’: 代表的是这个主键是否为自增长的<br>        * ‘nullable’ : 表示该字段是否可以为空，数据库默认是能为空<br>    * 最后需要用’db.create_all’来将模型真正的创建到数据库中</p>
<p>   在实践过程中遇到的问题：</p>
<ul>
<li><p>对数据库的连接不熟练，以及配置文件的编写</p>
<pre><code>from flask import Flask</code></pre><p>   from flask_sqlalchemy import SQLAlchemy<br>   import config<br>   app = Flask(<strong>name</strong>)<br>   app.config.from_object(config)<br>   #初始化对象<br>   db = SQLAlchemy(app)</p>
<p>配置文件的编写：</p>
<h1 id="dialect-driver-username-password-host-post-database"><a href="#dialect-driver-username-password-host-post-database" class="headerlink" title="dialect+driver://username:password@host:post/database"></a>dialect+driver://username:password@host:post/database</h1><p>   DIALECT = ‘mysql’<br>   DRIVER = ‘mysqldb’<br>   USERNAME = ‘root’<br>   PASSWORD = ‘root’<br>   HOST = ‘127.0.0.1’<br>   POST = ‘3306’<br>   DATABASE = ‘db_mode2’<br>   SQLALCHEMY_DATABASE_URI = ‘{}+{}://{}:{}@{}:{}/{}?charset=utf8’.format(DIALECT,</p>
<pre><code>DRIVER,USERNAME,PASSWORD,HOST,POST,DATABASE)</code></pre><p>   SQLALCHEMY_TRACK_MODIFICATIONS = False</p>
</li>
<li><p>在数据库中需要使用的语句：</p>
<pre><code>创建数据库： create database 数据库名 charset utf8
查看数据库中的表 ： show tables 
查看表的内容： desc 表名
使用那个数据库： use 数据库名
展现创建的表格： show create table 表名
删除表格： drop table 表名</code></pre><ul>
<li><p>将SQL语句转化为py文件中类的语句<br>  ‘’’<br>SQL语句中创建表格<br>   create table article(</p>
<pre><code>id int primary key autoincrement,
title varchar(100) not null,
content text not null,</code></pre><p>   )<br>‘’’</p>
<p>class Article(db.Model):<br>   <strong>tablename</strong> =’article’<br>   id = db.Column(db.Integer,primary_key=True,autoincrement=True)<br>   title = db.Column(db.String(100),nullable=False)<br>   content = db.Column(db.Text,nullable=False)</p>
</li>
</ul>
</li>
</ul>
<p>创建一个表的例子：</p>
<pre><code>from flask import Flask
from flask_sqlalchemy import SQLAlchemy
import config
app = Flask(__name__)
app.config.from_object(config)
#初始化对象
db = SQLAlchemy(app)
&apos;&apos;&apos;
SQL语句中创建表格
    create table article(
        id int primary key autoincrement,
        title varchar(100) not null,
        content text not null,
    )
&apos;&apos;&apos;
class Article(db.Model):
    __tablename__ =&apos;article&apos;
    id = db.Column(db.Integer,primary_key=True,autoincrement=True)
    title = db.Column(db.String(100),nullable=False)
    content = db.Column(db.Text,nullable=False)
db.create_all()
@app.route(&apos;/&apos;)
def hello_world():
    return &apos;Hello World!&apos;
if __name__ == &apos;__main__&apos;:
    app.run()</code></pre><p>config 配置文件</p>
<pre><code># dialect+driver://username:password@host:post/database
DIALECT = &apos;mysql&apos;
DRIVER = &apos;mysqldb&apos;
USERNAME = &apos;root&apos;
PASSWORD = &apos;root&apos;
HOST = &apos;127.0.0.1&apos;
POST = &apos;3306&apos;
DATABASE = &apos;db_mode2&apos;
SQLALCHEMY_DATABASE_URI = &apos;{}+{}://{}:{}@{}:{}/{}?charset=utf8&apos;.format(DIALECT,
                               DRIVER,USERNAME,PASSWORD,HOST,POST,DATABASE)
SQLALCHEMY_TRACK_MODIFICATIONS = False</code></pre><p>5.SQLALchemy 数据库的增删查改</p>
<pre><code>#数据库增加数据
    article = Article(title = &apos;aaa&apos;,content = &apos;bbb&apos;)
    db.session.add(article)
    #事务相应（操作的开关）
    db.session.commit()

#数据库查找数据
    #SQL： select * from article where article.title=&apos;aaa&apos;;
    #query:查找   fileter：过滤
    article1 = Article.query.filter(Article.title == &apos;aaa&apos;)[0]
    #返回的是一个列表 之后的操作可以根据列表的操作进行
    print(&apos;title:%s&apos; % article1.title)
    print(&apos;content:%s&apos; % article1.content)

#数据的修改
    #1.先要查找出修改的数据
    article1 = Article.query.filter(Article.title==&apos;aaa&apos;)[0,1]
    #2.在需要修改的地方进行修改
    article1.title = &apos;new title&apos;
    #3.提交事务
    db.session.commit()

#删除数据
    #1.把需要删除的数据查找出来
    article1 = Article.query.filter(Article.content == &apos;bbb&apos;)[0]
     #2.删除数据
    db.session.delete(article1)
    #3.事务处理
    db.session.commit()</code></pre><p>6.Flask-SQLALchemy 外键及其关系<br>    * 连接数据库（跟以上的操作一样）<br>    * 创建两个表（user article）</p>
<pre><code> #创建用户表(user)
 &apos;&apos;&apos;
 SQL语句：
         create table users(
         id int primary key autoincrement,
         username varchar(100) not null
 )
 &apos;&apos;&apos;
 class User(db.Model):
     __tablename__ = &apos;user&apos;
     id = db.Column(db.Integer,primary_key= True,autoincrement=True)
     username = db.Column(db.String(100),nullable=True)

  #创建文章表
     &apos;&apos;&apos;
     SQL语句：
             create table article(
                 id int primary key autoincrement,
                 title varchar(100) not null,
                 content text not null,
                 author_id int,
                 foreign key &apos;author_id&apos; references &apos;user_id&apos;
     )        
     &apos;&apos;&apos;
     class Article(db.Model):
         __tablename__ =&apos;article&apos;
         id = db.Column(db.Integer,primary_key=True,autoincrement=True)
         title = db.Column(db.String(100),nullable=False)
         content = db.Column(db.Text,nullable=False)
         #引用的代码：db.ForeignKey(&apos;表名.属性值&apos;)
         author_id = db.Column(db.Integer,db.ForeignKey(&apos;user.id&apos;))

    * 映射到数据库中：   db.create_all()
        注意： db.create_all() 它只会部署一次，如果中途在类里面去需改表的属性是没有任何用处的，只有把表格进行删除，再
        重新创建一个表格才能添加其他的属性

* 在用户表中添加用户
     user1 = User(username = &apos;lijian&apos;)
     db.session.add(user1)
     db.session.commit()</code></pre><ul>
<li><p>在文章表中添加文章</p>
<pre><code>article = Article(title=&apos;aaa&apos;,content=&apos;bbb&apos;,author_id=1)
db.session.add(article)
db.session.commit()</code></pre><ul>
<li><p>实现需求：查找文章名称为aaa的作者</p>
<pre><code>这是需求的普通写法:没有起到简化的作用 再Flask中不会使用
    article = Article.query.filter(Article.title == &apos;aaa&apos;)[0]
    print(article.author_id)
    author_id = article.author_id
    user = User.query.filter(User.id == author_id)[0]
    print(user.username)

再Flask-SQLALchemy-Darabases中使用的方法:
    * 先要在class类中就行设置;

            class Article(db.Model):
            __tablename__ =&apos;article&apos;
            id = db.Column(db.Integer,primary_key=True,autoincrement=True)
            title = db.Column(db.String(100),nullable=False)
            content = db.Column(db.Text,nullable=False)
            #引用的代码：db.ForeignKey(&apos;表名.属性值&apos;)
            author_id = db.Column(db.Integer,db.ForeignKey(&apos;user.id&apos;))
    #重点：db.relationship是表述关系的连接参数  db.backre是表示关系反转的参数
    #正向引用（relationship）与反向引用（backref）（User表与article表）        #正向关系：是只通过article表里面的外键来与User表中的主键进行连接             然后读取相关信息            
    #通过文章名称找出作者名称
    #反转关系：是只通过User中的主键来连接article中的外键，然后读取article中的相关信息             
    #通过作者找出他写作的文章
    #模块名=db.relationship(&apos;关联的类名&apos;，backref = db.backref(&apos;自定义参数&apos;))
            author = db.relationship(&apos;User&apos;,backref = db.backref(&apos;articles&apos;))
    * 实现通过文章名称查找作者：

            article = Article.query.filter(Article.title == &apos;aaa&apos;)[0]
            #通过 article.author.usename 来找出文章的作者
            print(article.author.username)</code></pre><ul>
<li><p>实现需求：通过作者名找出其作品</p>
<pre><code>user = User.query.filter(User.username == &apos;lijian&apos;)[0]
#通过 user.articles.title 来查找作者的文章
result = user.articles
for article in result:
    print(article.title)</code></pre></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>实例：数据库的连接 表的制作 数据的的添加 实现通过作者找出他的所有文章 通过文章找出作者</p>
<pre><code>from flask import Flask
from flask_sqlalchemy import SQLAlchemy
import config

app = Flask(__name__)
app.config.from_object(config)
db = SQLAlchemy(app)
#创建用户表
&apos;&apos;&apos;
SQL语句：
        create table users(
        id int primary key autoincrement,
        username varchar(100) not null
)
&apos;&apos;&apos;
class User(db.Model):
    __tablename__ = &apos;user&apos;
    id = db.Column(db.Integer,primary_key= True,autoincrement=True)
    username = db.Column(db.String(100),nullable=True)
#创建文章表
&apos;&apos;&apos;
SQL语句：
        create table article(
            id int primary key autoincrement,
            title varchar(100) not null,
            content text not null,
            author_id int,
            foreign key &apos;author_id&apos; references &apos;user_id&apos;
)        
&apos;&apos;&apos;
class Article(db.Model):
    __tablename__ =&apos;article&apos;
    id = db.Column(db.Integer,primary_key=True,autoincrement=True)
    title = db.Column(db.String(100),nullable=False)
    content = db.Column(db.Text,nullable=False)
    #引用的代码：db.ForeignKey(&apos;表名.属性值&apos;)
    author_id = db.Column(db.Integer,db.ForeignKey(&apos;user.id&apos;))
    #正向引用（relationship）与反向引用（backref）
    author = db.relationship(&apos;User&apos;,backref = db.backref(&apos;articles&apos;))
 #实现映射到表中
db.create_all()
##########
@app.route(&apos;/&apos;)
def hello_world():
    &apos;&apos;&apos;
    #在用户表中添加用户
    user1 = User(username = &apos;lijian&apos;)
    db.session.add(user1)
    db.session.commit()
    &apos;&apos;&apos;

    #添加作品信息
    &apos;&apos;&apos;
    article = Article(title=&apos;aaa&apos;,content=&apos;bbb&apos;,author_id=1)
    db.session.add(article)
    db.session.commit()
    &apos;&apos;&apos;
    #需求：寻找标题文章为aaa的作者
    &apos;&apos;&apos;
    article = Article.query.filter(Article.title == &apos;aaa&apos;)[0]
    print(article.author_id)
    author_id = article.author_id
    user = User.query.filter(User.id == author_id)[0]
    print(user.username)
    &apos;&apos;&apos;
    #上述需求的简化:
    #根据文章名称查找作者
    article = Article.query.filter(Article.title == &apos;aaa&apos;)[0]
    print(article.author.username)
    print(&quot;*&quot;*20)

    #需求 找到lijian写过的所有的文章
    user = User.query.filter(User.username == &apos;lijian&apos;)[0]
    result = user.articles
    for article in result:
        print(article.title)
    &apos;&apos;&apos;
    #先添加一篇文章
    article = Article(title=&apos;111&apos;,content=&apos;222&apos;,author_id=1 )
    db.session.add(article)
    db.session.commit()
    &apos;&apos;&apos;
    return &apos;Hello World!&apos;
if __name__ == &apos;__main__&apos;:
    app.run(debug=True)</code></pre><p> 数据库连接的config 文件：</p>
<pre><code> #dialect+driver://username:password@host:post/database
DIALECT = &apos;mysql&apos;
DRIVER = &apos;mysqldb&apos;
USERNAME = &apos;root&apos;
PASSWORD = &apos;root&apos;
HOST = &apos;127.0.0.1&apos;
POST = &apos;3306&apos;
DATABASE = &apos;db_demo3&apos;
SQLALCHEMY_DATABASE_URI = &apos;{}+{}://{}:{}@{}:{}/{}?charset utf8&apos;.format(DIALECT,
                            DRIVER,USERNAME,PASSWORD,HOST,POST,DATABASE)
SQLALCHEMY_TRACK_MODIFICATIONS = False</code></pre><hr>
<p>7.SQLALchemy连接数据库中多对多关系<br>    * 配置相关的config 文件 与之前一样</p>
<pre><code>* 设置关联的语句（重点）（在class Aritcle 中进行设置）（secondary 设置中间表的连接）
    article = db.relationship(&apos;Tag&apos;,secondary=article_tag ,backref = db.backref(&apos;articles&apos;))

* 需要建立三个表格 article  tag  article_tag
                                            article与tag 表格的建立与之前的一样.
  article_tag 表格的建立：（db.Table 进行建立）
      #关联表
    article_tag = db.Table(&apos;article_tag&apos;,
    db.Column(&apos;article_id&apos;,db.Integer,db.ForeignKey(&apos;article.id&apos;),primary_key=True,),
    db.Column(&apos;tag_id&apos;,db.Integer,db.ForeignKey(&apos;tag.id&apos;),primary_key=True,)
                   )

    * 数据的插入：（ article1.article.append(tag1) 这个语句是重点）
    article1 = Article(title = &apos;aaa&apos;)
    article2 = Article(title = &apos;bbb&apos;)
    tag1 = Tag(name = &apos;111&apos;)
    tag2 = Tag(name = &apos;222&apos;)
    #article1下有哪些标签  一个article1有多个标签（重点）
    article1.article.append(tag1)
    article1.article.append(tag2)
    # article2下有哪些标签  一个article2有多个标签（重点）
    article2.article.append(tag1)
    article2.article.append(tag2)
    db.session.add(article1)
    db.session.add(article2)
    db.session.add(tag1)
    db.session.add(tag2)
    db.session.commit()</code></pre><p>案例：连接数据库 创建表格包含中间表 插入数据 关联数据 实现通过文章找Tag(免去config文件)</p>
<pre><code>from flask import Flask
from flask_sqlalchemy import SQLAlchemy
import config

app = Flask(__name__)
app.config.from_object(config)
db= SQLAlchemy(app)

&quot;&quot;&quot;
SQL语句：
    创建article表
    create table article(
        id int primary key autoincrement
        title varachar(100) not null
    )
    创建tag表
    create table tag(
        id int primary key autioncrement
        name varachar(50) not null
    )
    创建中间表
    create table article_tag(
        article_id int
        tag_id int
        primay key (&apos;article_id&apos;,&apos;tag_id&apos;)
        foreign_key &apos;article_id&apos; references &apos;article&apos;
        foreign_key &apos;tag_id&apos; references &apos;tag&apos;
    )

&quot;&quot;&quot;
#关联表
article_tag = db.Table(&apos;article_tag&apos;,
        db.Column(&apos;article_id&apos;,db.Integer,db.ForeignKey(&apos;article.id&apos;),primary_key=True,),
        db.Column(&apos;tag_id&apos;,db.Integer,db.ForeignKey(&apos;tag.id&apos;),primary_key=True,)
                       )

class Article(db.Model):
    __tablename__ = &apos;article&apos;
    id = db.Column(db.Integer,primary_key=True,autoincrement=True)
    title = db.Column(db.String(100),nullable=False)
    #这是外键的是指 以及表的关联过程  secondary
    article = db.relationship(&apos;Tag&apos;,secondary=article_tag ,backref = db.backref(&apos;articles&apos;))

class Tag(db.Model):
    __tablename__ = &apos;tag&apos;
    id = db.Column(db.Integer,primary_key=True,autoincrement=True)
    name = db.Column(db.String(50),nullable=False)

db.create_all()

@app.route(&apos;/&apos;)
def hello_world():
    &apos;&apos;&apos;
    article1 = Article(title = &apos;aaa&apos;)
    article2 = Article(title = &apos;bbb&apos;)
    tag1 = Tag(name = &apos;111&apos;)
    tag2 = Tag(name = &apos;222&apos;)
    #article1下有哪些标签  一个article1有多个标签
    article1.article.append(tag1)
    article1.article.append(tag2)
    # article2下有哪些标签  一个article2有多个标签
    article2.article.append(tag1)
    article2.article.append(tag2)
    db.session.add(article1)
    db.session.add(article2)
    db.session.add(tag1)
    db.session.add(tag2)
    db.session.commit()
    &apos;&apos;&apos;
    article1= Article.query.filter(Article.title == &apos;aaa&apos;)[0]
    tags = article1.article
    for tag in tags:
        print(tag.name)

    return &apos;Hello World!&apos;

if __name__ == &apos;__main__&apos;:
    app.run(debug=True)</code></pre><hr>
<p>8.在分开models中解决循环引用<br>     分开models 的目的： 是为了更好的管理代码<br>     解决循环引用的方法：  是将add文件 分割开来  可以同时被几个文件引用 不会产生循环</p>
<pre><code>models.sep文件：（主文件）
    from flask import Flask
    # 引入models中的 Ariticle
    from models import Ariticle
    # 引入exts中的db
    from exts import db

    app = Flask(__name__)
    #防止循环引用 初始化app
    db.init_app(app)

    db.create_all()

    @app.route(&apos;/&apos;)
    def hello_world():
        return &apos;Hello World!&apos;

    if __name__ == &apos;__main__&apos;:
        app.run()

exts文件：
    from flask_sqlalchemy import SQLAlchemy
    db = SQLAlchemy()

models.py 文件：
    #引入exts 中的 db
    from exts import db
    class Ariticle(db.Model):
        __table__ = &apos;article&apos;
        id = db.Column(db.Integer, primary_key=True, autoincrement=True)
        title = db.Column(db.String(100), nullable=False)</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/02/04/Flask-SQLAlchemy-DateBase/" data-id="ck67xvsxx0000a8v3e3e4ga4b" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/02/06/Python%E5%81%9A%E9%A2%98%E6%97%B6%E5%8F%91%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Python做题时发现的问题
        
      </div>
    </a>
  
  
    <a href="/2020/02/02/Flask--urls%E5%92%8C%E8%A7%86%E5%9B%BE/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Flask--urls和视图</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Li-jian/" rel="tag">Li jian</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%A3%E7%A0%81%E5%9C%A8models-Migrate%E6%96%87%E4%BB%B6%E4%B8%AD/" rel="tag">代码在models_Migrate文件中</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Li-jian/" style="font-size: 10px;">Li jian</a> <a href="/tags/%E4%BB%A3%E7%A0%81%E5%9C%A8models-Migrate%E6%96%87%E4%BB%B6%E4%B8%AD/" style="font-size: 10px;">代码在models_Migrate文件中</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/02/09/Flask-jinja/">Flask-jinja</a>
          </li>
        
          <li>
            <a href="/2020/02/09/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E9%9A%8F%E7%AC%94%E8%AE%B0%E5%BD%95/">前端学习随笔记录</a>
          </li>
        
          <li>
            <a href="/2020/02/08/Flask-Migrate/">Flask-Migrate</a>
          </li>
        
          <li>
            <a href="/2020/02/07/Flask-Script/">Flask-Script</a>
          </li>
        
          <li>
            <a href="/2020/02/06/Python%E5%81%9A%E9%A2%98%E6%97%B6%E5%8F%91%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98/">Python做题时发现的问题</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 li jian<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>